# ZCAD Rust 移植阶段 0 结论

## 核心功能范围
- DXF 解析与写出：保持与 Pascal 版本相同的实体覆盖（线段、圆弧、多段线、文字、块等）。
- 几何与对象管理：支持图层、属性、捕捉与选择逻辑，为后续命令系统奠定基础。
- 电气扩展：保留电气符号库及其属性结构，作为第二阶段的扩展目标。

## 依赖迁移方案
| 现有组件 | Rust 等效方案 | 备注 |
| --- | --- | --- |
| Lazarus/LCL UI | `bevy` + `bevy_egui` | `bevy_egui` 负责工具面板、属性调试界面；主视口使用 bevy 渲染。 |
| OpenGL/GDI 渲染 | `bevy` 内置 `wgpu` 管线 | 保证跨平台和现代 GPU API，评估性能回归。 |
| Pascal 几何与数学 | `glam` 0.30 | 使用 `glam::Vec2/Vec3` 与矩阵工具统一数学表示。 |
| Makefile + typeexporter | Cargo 构建脚本与资源打包工具 | 统一在 Rust 工作流下生成运行时文件、配置模板。 |

## 首个 Rust 里程碑
- CLI/桌面原型可加载 DXF，转换为 `zcad-core` 文档模型。
- 通过 bevy 窗口展示视图，支持基础平移、缩放。
- 使用 `bevy_egui` 呈现实体列表与图层开关。

## 风险与后续跟进
- DXF 解析对齐需对照 Pascal 版本输出，建议准备 golden 文件与自动化对比。
- bevy 与 `bevy_egui` 版本需与 Rust 稳定版保持兼容，关注未来 0.14→0.15 迭代。
- 电气扩展依赖的脚本与资源格式尚未完全梳理，阶段 2 前需补充需求。 
